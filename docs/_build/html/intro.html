

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction &mdash; SXDM Documentation v0.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Importing Data into SXDM" href="importing.html" />
    <link rel="prev" title="SXDM documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SXDM Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development">Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#jupyter">Jupyter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tests">Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scanning-x-ray-diffraction-microscopy">Scanning X-Ray Diffraction Microscopy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-workflow">Example Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="importing.html">Importing Data into SXDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analyzing the Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization of Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">sxdm</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SXDM Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Introduction</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>SXSM is a toolkit for interacting with Scanning X-ray microscopy data,
most likely collected at the Advanced Photon Source - Beamline 26-ID-C.
By collecting a set of frames at multiple incident angles, spectral/diffraction
maps  are reconstructed to provide chemical/strain insight. Although SXDM was not
designed for Fluorescence Mapping or XANES Mapping, built in functions allow
Users to easily handle datasets to fit their needs.</p>
<p>This project has the following design goals:</p>
<ul class="simple">
<li><p>Provide a python toolkit for analysis of X-ray diffraction frames.</p></li>
<li><p>Store data in an open format for easy distribution.</p></li>
<li><p>Provide framework 26-ID-C data handling.</p></li>
</ul>
<p>GUI tools (eg. DUDE) exist for performing this type of
analysis. While convenient and more versatile, final setup and testing has not
been carried out. This module hopes to alleviate importing and
data analysis issues for the 26-ID-C beamline. SXDM does provide
an interactive GUI for visualizing the data, but this GUI
does not alter the data or export results. This way, the analysis
steps are captured either in an IPython notebook or conventional python
script. These steps, together with the original data, should then be
sufficient to reproduce the results exactly.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>SXDM can be installed from the python package index (PyPI) using pip</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install sxdm
</pre></div>
</div>
</div>
<div class="section" id="development">
<h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<p>If you plan to contribute changes to <cite>sxdm</cite>, installing in developer
mode may be more your style. This will also allow you to run tests and
build documentation.</p>
<div class="section" id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Assuming you are using conda, here are the
steps. Any version of python &gt;=3.5 should be ok.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ conda create -n sxdm <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.6
$ <span class="nb">source</span> activate sxdm
$ git clone clone git@github.com:WilliamJudge94/sxdm.git
$ pip3 install -r sxdm/requirements.txt
$ pip3 install ipykernel
$ ipython kernel install --user --name<span class="o">=</span>sxdm
</pre></div>
</div>
</div>
<div class="section" id="jupyter">
<h3>Jupyter<a class="headerlink" href="#jupyter" title="Permalink to this headline">¶</a></h3>
<p>Once in Jupyter the User may have to initiate the import through</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/Users/usr/virtual_environment/lib/python3.6/site-packages/&#39;</span><span class="p">)</span>

<span class="o">%</span><span class="n">matplotlib</span> <span class="n">qt</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/path/to/sxdm/folder&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">sxdm</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="section" id="tests">
<h3>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to run unit-tests is with python tester from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install pytest
$ pip install pytest-cov

$ <span class="nb">cd</span> /dir/sxdm
$ pytest --cov<span class="o">=</span>sxdm tests/
</pre></div>
</div>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>The documentation is built using sphinx. To make HTML documents, use the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install sphinx
$ <span class="nb">cd</span> /dir/sxdm/docs
$ make html
</pre></div>
</div>
</div>
</div>
<div class="section" id="scanning-x-ray-diffraction-microscopy">
<h2>Scanning X-Ray Diffraction Microscopy<a class="headerlink" href="#scanning-x-ray-diffraction-microscopy" title="Permalink to this headline">¶</a></h2>
<p>Coming soon…</p>
</div>
<div class="section" id="example-workflow">
<h2>Example Workflow<a class="headerlink" href="#example-workflow" title="Permalink to this headline">¶</a></h2>
<p>A typical procedure for interacting with microscope frame-sets involves the following parts:</p>
<ul class="simple">
<li><p>Import the raw data (.mda and .tif)</p></li>
<li><p>Apply corrections and align the images</p></li>
<li><p>Calculate some metric and create maps of it</p></li>
<li><p>Visualize the maps, statically or interactively.</p></li>
</ul>
<p>Example for a single frameset across difference X-ray incident angles:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
<span class="o">%</span><span class="n">autoreload</span> <span class="mi">2</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">qt</span>


<span class="c1"># Developer Version</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/path/to/sxdm&#39;</span><span class="p">)</span>
<span class="c1"># Developer Version</span>


<span class="kn">from</span> <span class="nn">sxdm</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Set file name</span>
<span class="n">hdf5_save_directory</span> <span class="o">=</span> <span class="s1">&#39;/dir/&#39;</span>
<span class="n">hdf5_save_filename</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span>

<span class="c1"># Importing .mda data</span>
<span class="n">import_mda</span><span class="p">(</span><span class="n">mda_path</span><span class="p">,</span> <span class="n">hdf5_save_directory</span><span class="p">,</span> <span class="n">hdf5_save_filename</span><span class="p">)</span>

<span class="c1"># Importing .tif images - file=&#39;/dir/test.h5&#39;</span>
                            <span class="o">-</span> <span class="n">was</span> <span class="n">created</span> <span class="n">by</span> <span class="n">the</span> <span class="n">import_mda</span><span class="p">()</span> <span class="n">function</span>
<span class="n">import_images</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">images_loc</span><span class="p">)</span>

<span class="c1"># Setting Detector Channels</span>
<span class="n">disp_det_chan</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
<span class="n">setup_det_chan</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">fluor</span><span class="p">,</span> <span class="n">roi</span><span class="p">,</span> <span class="n">detector_scan</span><span class="p">,</span>
                <span class="n">filenumber</span><span class="p">,</span> <span class="n">sample_theta</span><span class="p">,</span> <span class="n">hybrid_x</span><span class="p">,</span> <span class="n">hybrid_y</span><span class="p">,</span> <span class="n">mis</span><span class="p">)</span>

<span class="c1"># Set up SXDMFrameset</span>
<span class="n">scan_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<span class="n">dataset_name</span> <span class="o">=</span> <span class="s1">&#39;Test_Name&#39;</span>
<span class="n">test_fs</span> <span class="o">=</span> <span class="n">SXDMFrameset</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">dataset_name</span><span class="p">,</span>
                        <span class="n">scan_numbers</span> <span class="o">=</span> <span class="n">scan_numbers</span><span class="p">,</span> <span class="n">median_blur_algorithm</span><span class="o">=</span><span class="s1">&#39;numpy&#39;</span><span class="p">)</span>

<span class="c1"># Alignment</span>
<span class="n">test_fs</span><span class="o">.</span><span class="n">alignment</span><span class="p">()</span>

<span class="c1"># Analysis</span>
<span class="n">test_fs</span><span class="o">.</span><span class="n">centroid_analysis</span><span class="p">()</span>

<span class="c1"># Viewer</span>
<span class="n">test_fs</span><span class="o">.</span><span class="n">centroid_viewer</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="importing.html" class="btn btn-neutral float-right" title="Importing Data into SXDM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="SXDM documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, William Judge

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>